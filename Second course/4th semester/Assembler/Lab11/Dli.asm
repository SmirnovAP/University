.386
.model FLAT, C

public Dli, DelProbel, CopyStr

.CODE
Dli:
	PUSH EBP
	MOV EBP, ESP
	PUSH EDI

	MOV EAX, 0
	MOV EDI, [EBP + 8]
	MOV ECX, -1
	REPNE SCASB
	NOT ECX
	DEC ECX
	MOV EAX, ECX
	
	POP EDI
	POP EBP
	RET


DelProbel:
	PUSH EBP
	MOV EBP, ESP
	PUSH EDI
	PUSH ESI
	PUSH EBX

COUNT_BEFORE:
	MOV EDI, [EBP + 8]
	MOV ECX, -1
	MOV EAX, ' '
	REPE SCASB
	NOT ECX
	DEC ECX
	MOV EBX, ECX
MOVE_FINISH:
	MOV ECX, -1
	MOV EAX, 0
	REPNE SCASB
	NOT ECX
	DEC ECX
	MOV EDX, ECX
COUNT_AFTER:
	STD
	MOV ECX, -1
	MOV EAX, ' '
	REPE SCASB
	NOT ECX
	DEC ECX
	SUB EDX, ECX

	CLD
	MOV ECX, EDX
	MOV EDI, [EBP + 8]
	MOV ESI, [EBP + 8]
	ADD ESI, EBX
	REP MOVSB

	DEC EDI
	MOV BYTE PTR [EDI], 0

	DEC EDX
	MOV EAX, EDX
	POP EBX
	POP ESI
	POP EDI
	POP EBP
	RET

CopyStr:
	PUSH EBP
	
	MOV EBP, ESP
	PUSH EBX
	PUSH EDI
	PUSH ESI
	MOV ECX, [EBP + 16]
	MOV EDI, [EBP + 12]
	MOV ESI, [EBP + 8]

	CLD
	CMP ESI, EDI
	JE EXIT
	JA M1
	STD
	ADD EDI, ECX
	ADD ESI, ECX
	DEC EDI
	DEC ESI
M1:
	REP MOVSB

EXIT:
	mov EAX, [EBP + 12]
	POP ESI
	POP EDI
	POP EBX
	POP EBP
RET
END